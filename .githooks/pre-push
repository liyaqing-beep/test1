#!/usr/bin/env bash
set -euo pipefail

# Block pushes from protected branches (main/master).
branch="$(git rev-parse --abbrev-ref HEAD)"
if [[ "$branch" =~ ^(main|master)$ ]]; then
  echo "Aborting push: pushing '$branch' is blocked. Push a feature branch and open a PR." >&2
  echo "Override with: git push --no-verify ... if you really mean it." >&2
  exit 1
fi

exit 0

